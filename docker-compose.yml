services:
  pachelarr:
    build: .
    ports:
      - "6800:6800"
    environment:
      # === REQUIRED CONFIGURATION ===
      # Prowlarr connection settings
      - PROWLARR_URL=http://your-prowlarr-host:9696
      - PROWLARR_API_KEY=your_prowlarr_api_key_here
      
      # Torbox API key for torrent caching
      - TORBOX_API_KEY=your_torbox_api_key_here
      
      # Pachelarr API key (used by Radarr/Sonarr to authenticate)
      - CACHEBOX_API_KEY=your_pachelarr_api_key_here
      
      # === PACHELARR SETTINGS ===
      # Port to listen on (default: 8080)
      - CACHEBOX_PORT=6800
      
      # Log level: DEBUG, INFO, WARNING, ERROR (default: INFO)
      - CACHEBOX_LOG_LEVEL=INFO
      
      # Seeders boost value added to cached torrents (default: 10000)
      - CACHEBOX_SEEDERS_BOOST=10000
      
      # Fallback query for category-only requests (improves Sonarr "Test" behavior)
      # Set to empty string to disable (default: "")
      - CACHEBOX_TEST_FALLBACK_QUERY=
      
      # === TMDB CONFIGURATION ===
      # TMDB API key for looking up movie/TV titles from IMDb/TVDB/TMDB IDs
      # Get a free key at: https://www.themoviedb.org/settings/api
      # Without this, ID-only searches (common with Radarr/Sonarr) will fail
      - TMDB_API_KEY=your_tmdb_api_key_here
      
      # === TORBOX SETTINGS ===
      # Torbox API endpoint for checking cached torrents (default: https://api.torbox.app/v1/api/torrents/checkcached)
      - TORBOX_CHECK_URL=https://api.torbox.app/v1/api/torrents/checkcached
      
      # Number of hashes to check per Torbox API request (default: 100, max: 100)
      - TORBOX_CHUNK_SIZE=100
      
      # Maximum retry attempts for Torbox API failures (default: 3)
      - TORBOX_MAX_RETRIES=3
      
      # Backoff delay in seconds between retries (default: 0.5)
      - TORBOX_RETRY_BACKOFF=0.5
      
      # === TRACKER SCRAPING SETTINGS ===
      # Enable direct UDP tracker scraping for seeders/leechers (default: false)
      # Warning: Enables direct contact with public trackers
      - TRACKER_SCRAPE_ENABLED=false
      
      # Number of concurrent tracker scrape requests (default: 4)
      - TRACKER_SCRAPE_CONCURRENCY=4
      
      # Timeout in seconds for tracker scrape requests (default: 5.0)
      - TRACKER_SCRAPE_TIMEOUT=5.0
      
      # Number of info hashes to scrape per tracker request (default: 50)
      - TRACKER_SCRAPE_BATCH_SIZE=50
